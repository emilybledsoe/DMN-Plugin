{"version":3,"sources":["../../../src/features/editor-actions/EditorActions.js"],"names":["forEach","NOT_REGISTERED_ERROR","IS_REGISTERED_ERROR","EditorActions","commandStack","eventBus","modeling","selection","_actions","undo","redo","select","cell","deselect","addRow","attrs","index","removeRow","row","moveRow","addCol","removeCol","col","moveCol","action","opts","error","actions","listener","_registerAction","isRegistered","undefined","$inject","message","Error"],"mappings":"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","sourcesContent":["import { forEach } from 'min-dash';\n\nconst NOT_REGISTERED_ERROR = 'is not a registered action',\n      IS_REGISTERED_ERROR = 'is already registered';\n\n\n/**\n * An interface that provides access to modeling actions by decoupling\n * the one who requests the action to be triggered and the trigger itself.\n *\n * It's possible to add new actions by registering them with ´registerAction´ and likewise\n * unregister existing ones with ´unregisterAction´.\n *\n */\nexport default class EditorActions {\n  constructor(commandStack, eventBus, modeling, selection) {\n\n    this._actions = {\n      undo() {\n        commandStack.undo();\n      },\n      redo() {\n        commandStack.redo();\n      },\n      select({ cell }) {\n        selection.select(cell);\n      },\n      deselect() {\n        selection.deselect();\n      },\n      addRow({ attrs, index }) {\n        modeling.addRow(attrs, index);\n      },\n      removeRow({ row }) {\n        modeling.removeRow(row);\n      },\n      moveRow({ row, index }) {\n        modeling.moveRow(row, index);\n      },\n      addCol({ attrs, index }) {\n        modeling.addCol(attrs, index);\n      },\n      removeCol({ col }) {\n        modeling.removeCol(col);\n      },\n      moveCol({ col, index }) {\n        modeling.moveCol(col, index);\n      }\n    };\n  }\n\n  /**\n   * Triggers a registered action\n   *\n   * @param  {String} action\n   * @param  {Object} opts\n   *\n   * @return {Unknown} Returns what the registered listener returns\n   */\n  trigger(action, opts) {\n    if (!this._actions[action]) {\n      throw error(action, NOT_REGISTERED_ERROR);\n    }\n\n    return this._actions[action](opts);\n  }\n\n  /**\n   * Registers a collections of actions.\n   * The key of the object will be the name of the action.\n   *\n   * @param  {Object} actions\n   */\n  register(actions, listener) {\n    if (typeof actions === 'string') {\n      return this._registerAction(actions, listener);\n    }\n\n    forEach(actions, (listener, action) => {\n      this._registerAction(action, listener);\n    }, this);\n  }\n\n  /**\n   * Registers a listener to an action key\n   *\n   * @param  {String} action\n   * @param  {Function} listener\n   */\n  _registerAction(action, listener) {\n    if (this.isRegistered(action)) {\n      throw error(action, IS_REGISTERED_ERROR);\n    }\n\n    this._actions[action] = listener;\n  }\n\n  /**\n   * Unregister an existing action\n   *\n   * @param {String} action\n   */\n  unregister(action) {\n    if (!this.isRegistered(action)) {\n      throw error(action, NOT_REGISTERED_ERROR);\n    }\n\n    this._actions[action] = undefined;\n  }\n\n\n  /**\n   * Checks wether the given action is registered\n   *\n   * @param {String} action\n   *\n   * @return {Boolean}\n   */\n  isRegistered(action) {\n    return !!this._actions[action];\n  }\n}\n\nEditorActions.$inject = [\n  'commandStack',\n  'eventBus',\n  'modeling',\n  'selection'\n];\n\n// helpers /////////////\n\nfunction error(action, message) {\n  return new Error(action + ' ' + message);\n}"],"file":"EditorActions.js"}