{"version":3,"sources":["../../../../src/features/modeling/cmd/RemoveColHandler.js"],"names":["RemoveColHandler","sheet","elementFactory","_sheet","_elementFactory","context","col","root","oldRoot","oldIndex","cols","indexOf","Error","id","removeCol","getRoot","addCol","$inject"],"mappings":";;;;;;AACA;;;IAGqBA,gB;;;AAEnB,4BAAYC,KAAZ,EAAmBC,cAAnB,EAAmC;AAAA;;AACjC,SAAKC,MAAL,GAAcF,KAAd;AACA,SAAKG,eAAL,GAAuBF,cAAvB;AACD;AAED;;;;;;;4BAGQG,O,EAAS;AAEf,UAAMJ,KAAK,GAAG,KAAKE,MAAnB;AAFe,UAKbG,GALa,GAMXD,OANW,CAKbC,GALa;AAQf,UAAMC,IAAI,GAAGF,OAAO,CAACG,OAAR,GAAkBF,GAAG,CAACC,IAAnC,CARe,CAUf;;AACA,UAAME,QAAQ,GAAGJ,OAAO,CAACI,QAAR,GAAmBF,IAAI,CAACG,IAAL,CAAUC,OAAV,CAAkBL,GAAlB,CAApC;;AAEA,UAAIG,QAAQ,KAAK,CAAC,CAAlB,EAAqB;AACnB,cAAM,IAAIG,KAAJ,eAAiBN,GAAG,CAACO,EAArB,mBAAN;AACD;;AAEDZ,MAAAA,KAAK,CAACa,SAAN,CAAgBR,GAAhB;AAEA,aAAOL,KAAK,CAACc,OAAN,EAAP;AACD;AAGD;;;;;;2BAGOV,O,EAAS;AAAA,UAGZC,GAHY,GAKVD,OALU,CAGZC,GAHY;AAAA,UAIZG,QAJY,GAKVJ,OALU,CAIZI,QAJY;AAOd,UAAMR,KAAK,GAAG,KAAKE,MAAnB;AAEAF,MAAAA,KAAK,CAACe,MAAN,CAAaV,GAAb,EAAkBG,QAAlB;AAEA,aAAOR,KAAK,CAACc,OAAN,EAAP;AACD;;;;;;SAhDkBf,gB;AAqDrBA,gBAAgB,CAACiB,OAAjB,GAA2B,CACzB,OADyB,EAEzB,gBAFyB,CAA3B","sourcesContent":["\n/**\n * A handler that implements column deletion.\n */\nexport default class RemoveColHandler {\n\n  constructor(sheet, elementFactory) {\n    this._sheet = sheet;\n    this._elementFactory = elementFactory;\n  }\n\n  /**\n   * <do>\n   */\n  execute(context) {\n\n    const sheet = this._sheet;\n\n    let {\n      col\n    } = context;\n\n    const root = context.oldRoot = col.root;\n\n    // retrieve and remember previous col position\n    const oldIndex = context.oldIndex = root.cols.indexOf(col);\n\n    if (oldIndex === -1) {\n      throw new Error(`col#${col.id} not in sheet`);\n    }\n\n    sheet.removeCol(col);\n\n    return sheet.getRoot();\n  }\n\n\n  /**\n   * <undo>\n   */\n  revert(context) {\n\n    const {\n      col,\n      oldIndex\n    } = context;\n\n    const sheet = this._sheet;\n\n    sheet.addCol(col, oldIndex);\n\n    return sheet.getRoot();\n  }\n\n}\n\n\nRemoveColHandler.$inject = [\n  'sheet',\n  'elementFactory'\n];"],"file":"RemoveColHandler.js"}